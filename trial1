
import streamlit as st
import pandas as pd
import numpy as np
import plotly.express as px
from io import BytesIO

st.set_page_config(page_title="ğŸ¨ Dashboard Kepatuhan Pajak Daerah", layout="wide")
st.title("ğŸ¯ Dashboard Kepatuhan Pajak Daerah")
st.markdown("Upload file Excel, pilih sheet, filter, dan lihat visualisasi yang menarik âœ¨")

# ---------- PANDUAN ----------
with st.expander("ğŸ“˜ Panduan Format Excel yang dapat digunakan(Klik untuk lihat)"):
    st.markdown("""
    Berikut adalah aturan format file Excel yang dapat digunakan:

    âœ… **Kolom Wajib:**
    - `NAMA OP`, `STATUS`, `TMT`, `KLASIFIKASI`(Jika PBJT Jasa Kesenian & Hiburan)

    âœ… **Kolom Pembayaran Bulanan:**
    - Nama kolom bisa `2024-01-01`, `Jan-24`, dll â€” yang penting ada tahun pajaknya.
    - Nilai harus berupa angka (jangan pakai teks atau simbol).

    ğŸ“ Gunakan contoh file bernama **CONTOH_FORMAT_SETORAN MASA.xlsx**
    """)
    
    # ---------- INPUT ----------
st.markdown("### ğŸ“¤ Silakan upload file Excel berisi data setoran masa pajak.")
ttahun_pajak = st.number_input("ğŸ“… Pilih Tahun Pajak", min_value=2000, max_value=2100, value=2024)
uploaded_file = st.file_uploader("Upload File Excel", type=["xlsx"], label_visibility="collapsed")

if uploaded_file is None:
    st.warning("âš ï¸ Silakan upload file terlebih dahulu.")
    st.stop()
    


# ---------- BACA DATA ----------
df_input = pd.read_excel(uploaded_file)
